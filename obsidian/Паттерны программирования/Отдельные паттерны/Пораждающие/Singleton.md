# Суть
Singleton - это пораждающий паттерн, который гарантирует, что в программе существует только один экземпляр класса и предоставляет глобальную точку доступа к этому экземпляру. Это делает возможным прямую манипуляцию с объектом класса из разных частей программы.
# Что решает
1. Гарантирует, что экзепляр - единственный.  То есть если хотим получать старый объект, вместо создания нового.
2. Глобальная точка доступа. Глобальная переменная не защищена от записи, но singleton-объект нельзя заменить - только получить. При этом с простым и доступным интерфейсом.
Все реализации сводятся к сокрытию конструктора и созданию публичного статического метода, который может лениво проинициализировать объект и далее уже возвращать ссылку на него.
# Структура и пример кода
В простом случае паттерн состоит из двух сущностей:
1. Сам объект-одиночка
2. Статический публичный метод
В этом примере мы создаем класс Singleton с единственным экземпляром __instance, который является закрытым и доступен только через статический метод getInstance(). Если экземпляр еще не создан, мы создаем его в этом методе, иначе мы возвращаем уже существующий экземпляр.
```py
class Singleton:  
    __instance = None  
  
    @staticmethod  
    def get_instance():  
        if Singleton.__instance is None:  
            Singleton()  
        return Singleton.__instance  
  
    def __init__(self):  
        if Singleton.__instance:  
            raise Exception("This is a singleton class")  
        else:  
            Singleton.__instance = self
```
# Когда применять
1. Когда в программе должен быть единственный экземпляр какого-то класса, доступный всем клиентам (например, общий доступ к базе данных из разных частей программы).
2. Когда вам хочется иметь больше контроля над глобальными переменными.
# Плюсы и минусы
Плюсы
1. Единственность экземпляра
2. Глобальный доступ
3. "Ленивая" инициализация
Минусы
1. Нарушает _принцип [[Объектно-Ориентированное Программирование]] единственной ответственности класса_.
2. Маскирует плохой дизайн
3. Проблемы с мультипоточностью (но есть отдельные способы решить это, [пример](https://refactoring.guru/ru/design-patterns/singleton/python/example#example-1))
4. Требует создания Mock-объектов при юнит тестировании
# Отношения с другими паттернами
1. [[Facade]] можно сделать SIngleton'ом, так как обычно нужен только один объект-фасад.
2. [[Factory]], [[Builder]] и Prototype можно реализовать через Singleton.
